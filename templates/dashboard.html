{% extends 'base.html' %}
{% block title %}CleanDivide{% endblock %}
{%block custom_css %}
<link rel="stylesheet" href="{{ url_for('static', filename= 'css/dashboard.css') }}">
{% endblock %}

{% block content %}

    {% if total_tasks == 0 %}
        {% if is_table_owner == 0 %}
            <div class="row col-12 d-flex justify-content-center align-items-center">
                <a href="{{ url_for('helpers_bp.become_house_master') }}" class="btn mx-2 rounded mx-auto" id="google-button">
                <i class="fa-brands fa-google fa-lg"></i></i> Become house master
                </a>
            </div>
        {% endif %}

        <p>Your house master has not created a task calendar yet. This usually means that you can continue procrastinating</p>
    {% else %}

    <div class="row d-flex justify-content-end my-5">
        <a href="{{ url_for('dashboard_bp.dashboard_monthly') }}" method="post" class="btn default-dashboard-button">
            See next 30 days 
        </a>
        {% if is_table_owner %}
        <a href="/add.html" class="btn default-dashboard-button">
            Generate a new table 
        </a>
        {% endif %}
    </div>


    <!-- Your Own Tasks Today -->
    <h1>Your Tasks for Today</h1>
    <h4>Table owner is {{ table_owner }}</h4>

    <form method="post" action="{{ url_for('helpers_bp.mark_complete') }}">
        <table>
            <tr>
                <th>ID</th>
                <th>Description</th>
                <th>Points</th>
                <th>Frequency</th>
                <th>Complete?</th>
            </tr>
            {% for task in own_tasks_today %}
            <tr>
                <td>{{ task["id"] }} </td>
                <td>{{ task['task_description'] }}</td>
                <td>{{ task['task_points'] }}</td>
                <td>{{ task['task_frequency'] }}</td>
                <td>
                    {% if task['task_complete'] == 1 %}
                        Complete!
                    {% else %}
                        <form action="{{ url_for('helpers_bp.mark_complete') }}" method="post">
                            <button type="submit" name="task_id" value="{{ task['id'] }}">Mark as complete</button>
                        </form>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </table>
    </form>

    <!-- Flatmates' Tasks Today -->
    <h1>Flatmates' Tasks for Today</h1>
    <table>
        <tr>
            <th>Task owner</th>
            <th>Description</th>
            <th>Status</th>
        </tr>
        {% for task in flatmates_tasks_today %}
    <tr>
        <td>{{ task['flatmate_name'] or task['task_owner'] }}</td>
        <td>{{ task['task_description'] }}</td>
        <td>
            {% if task['task_complete'] == 1 %}
                Complete!
            {% else %}
                Incomplete!
            {% endif %}
        </td>
    </tr>
    {% endfor %}
    </table>

    <!-- Your Own Tasks for Tomorrow -->
    <h1>Your Tasks for Tomorrow</h1>
    <table>
        <tr>
            <th>Description</th>
            <th>Points</th>
            <th>Frequency</th>
        </tr>
        {% for task in own_tasks_tomorrow %}
        <tr>
            <td>{{ task['task_description'] }}</td>
            <td>{{ task['task_points'] }}</td>
            <td>{{ task['task_frequency'] }}</td>
        </tr>
        {% endfor %}
    </table>
    {% endif %}
{% endblock %}



    {%block scripts %}
    <!-- <script src="{{ url_for('static', filename= 'js/datamanipulation.js') }}"></script> -->
    <script src="{{ url_for('static', filename= 'js/dashboard.js') }}"></script>

    <!-- JS variables -->
    <script type="text/javascript">
        // Define a JavaScript variable that holds the URL
    </script>

    

{% endblock %}
